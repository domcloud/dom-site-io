/*! For license information please see 6810147d.ae70f289.js.LICENSE.txt */
"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5292],{7711:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>l,toc:()=>d});var r=s(5893),i=s(1151);const t={title:"Security Services"},o=void 0,l={unversionedId:"features/security",id:"features/security",title:"Security Services",description:"There are four security services that's helping to protect your website security.",source:"@site/docs/features/security.mdx",sourceDirName:"features",slug:"/features/security",permalink:"/docs/features/security",draft:!1,unlisted:!1,editUrl:"https://github.com/domcloud/domcloud-co/tree/master/docs/features/security.mdx",tags:[],version:"current",frontMatter:{title:"Security Services"},sidebar:"tutorialSidebar",previous:{title:"Linux Utilities",permalink:"/docs/features/linux"},next:{title:"Integration",permalink:"/docs/integration/"}},c={},d=[{value:"IPTables Service",id:"iptables-service",level:2},{value:"Inbound Connection",id:"inbound-connection",level:3},{value:"Outbound Connection",id:"outbound-connection",level:3},{value:"Fail2Ban Service",id:"fail2ban-service",level:2},{value:"EarlyOOM Service",id:"earlyoom-service",level:2},{value:"DOM Cloud Bridge&#39;s Sudokill",id:"dom-cloud-bridges-sudokill",level:2}];function a(e){const n=Object.assign({p:"p",h2:"h2",code:"code",h3:"h3",ul:"ul",li:"li",a:"a",strong:"strong"},(0,i.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"There are four security services that's helping to protect your website security."}),"\n",(0,r.jsx)(n.h2,{id:"iptables-service",children:"IPTables Service"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"iptables"})," and ",(0,r.jsx)(n.code,{children:"ip6tables"})," services are the firewall software used to filter inbound and outbound connections routed through IPv4 and IPv6 connections."]}),"\n",(0,r.jsx)(n.h3,{id:"inbound-connection",children:"Inbound Connection"}),"\n",(0,r.jsx)(n.p,{children:"Inbound connection is for incoming traffic from the internet. Certain ports are opened for variety of purposes:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"21"})," - FTP"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"22"})," - SSH"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"53"})," - DNS (TCP & UDP)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"80"})," - HTTP"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"443"})," - HTTPS"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"2443"})," - Webmin"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"3306"})," - MySQL"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"5432"})," - PostgreSQL"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"32768:65535"})," - Ephemeral Ports (TCP only)"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Ephemeral ports are only allowed to be used for local development inside the server. Other ports not listed are blocked."}),"\n",(0,r.jsx)(n.h3,{id:"outbound-connection",children:"Outbound Connection"}),"\n",(0,r.jsxs)(n.p,{children:["Outbound connection is for outgoing traffic to the internet. It's allowed for all ports and protocols by default, except port ",(0,r.jsx)(n.code,{children:"25"}),", it's blocked to prevent SMTP / Email abuse. If you need to send emails, you can use a third-party email relay services that uses a more secure ",(0,r.jsx)(n.code,{children:"587"})," port or even with HTTP API."]}),"\n",(0,r.jsxs)(n.p,{children:["There are also additional measures to prevent abuse, by enabling ",(0,r.jsx)(n.code,{children:"firewall"})," via ",(0,r.jsx)(n.a,{href:"/docs/features/deploy#firewall",children:"the deployment system"}),". It blocks all outbound connection except for sites that are ",(0,r.jsx)(n.a,{href:"https://github.com/domcloud/bridge/blob/main/src/whitelist/sites.conf",children:"whitelisted"}),". It works by resolving all whitelisted sites to IP addresses and allow only those IP addresses to be accessed."]}),"\n",(0,r.jsxs)(n.p,{children:["This ",(0,r.jsx)(n.code,{children:"firewall"})," feature is opt-in and can be turned off at will. The feature is mostly used for installation for weakly secured PHP servers like WordPress. To check if the feature is enabled, you can go to Check -> Firewall menu."]}),"\n",(0,r.jsx)(n.h2,{id:"fail2ban-service",children:"Fail2Ban Service"}),"\n",(0,r.jsx)(n.p,{children:"Fail2Ban is a service that block IPs automatically by detecting malicious attempts found from system logs in real time. It's implemented for all users and it's configured to listen for common internet attacks. The rules that's enabled are filtering:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"WordPress"})," : Login failures from ",(0,r.jsx)(n.code,{children:"/wp-login"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"MariaDB"})," : Login failures from MariaDB or PhpMyAdmin."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Webmin"})," : Login failures from webmin login UI."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"SSH"})," : Login failures from SSH."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"If login failures detected for three times with the same IP, that IP will be blocked from accessing the related service for 12 hours straight."}),"\n",(0,r.jsx)(n.h2,{id:"earlyoom-service",children:"EarlyOOM Service"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://github.com/rfjakob/earlyoom",children:"EarlyOOM"})," is a service that prevents the whole system going offline when running out of memory."]}),"\n",(0,r.jsx)(n.p,{children:"Previously when there's too much application running at the same time, the whole server is freezes and struggles to keep responsive. When that happens we (the developer) usually reboot the services immediately as we can. That proven unreliable hence why this service installed."}),"\n",(0,r.jsx)(n.h2,{id:"dom-cloud-bridges-sudokill",children:"DOM Cloud Bridge's Sudokill"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://github.com/domcloud/bridge/blob/main/sudokill.js",children:"Sudokill is a custom script"})," designed for DOM Cloud. It kills unwanted processes that mostly being the result of someone trying to break our resource policy. It's implemented as a cron job that runs every 5 minutes."]}),"\n",(0,r.jsxs)(n.p,{children:["It kills with ",(0,r.jsx)(n.code,{children:"SIGKILL"})," when following criteria met:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"It's a user process, not a root or a system daemon."}),"\n",(0,r.jsxs)(n.li,{children:["Running for longer than 3 hours, or:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Background processes"}),"\n",(0,r.jsx)(n.li,{children:"Detached from nginx/daemon/ssh"}),"\n",(0,r.jsx)(n.li,{children:"User doesn't have any active SSH session."}),"\n"]}),"\n"]}),"\n"]})]})}const h=function(e={}){const{wrapper:n}=Object.assign({},(0,i.ah)(),e.components);return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(a,e)})):a(e)}},5251:(e,n,s)=>{s(7418);var r=s(7294),i=60103;if(n.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var t=Symbol.for;i=t("react.element"),n.Fragment=t("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};function d(e,n,s){var r,t={},d=null,a=null;for(r in void 0!==s&&(d=""+s),void 0!==n.key&&(d=""+n.key),void 0!==n.ref&&(a=n.ref),n)l.call(n,r)&&!c.hasOwnProperty(r)&&(t[r]=n[r]);if(e&&e.defaultProps)for(r in n=e.defaultProps)void 0===t[r]&&(t[r]=n[r]);return{$$typeof:i,type:e,key:d,ref:a,props:t,_owner:o.current}}n.jsx=d,n.jsxs=d},5893:(e,n,s)=>{e.exports=s(5251)},1151:(e,n,s)=>{s.d(n,{Zo:()=>l,ah:()=>t});var r=s(7294);const i=r.createContext({});function t(e){const n=r.useContext(i);return r.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}const o={};function l({components:e,children:n,disableParentContext:s}){let l;return l=s?"function"==typeof e?e({}):e||o:t(e),r.createElement(i.Provider,{value:l},n)}}}]);